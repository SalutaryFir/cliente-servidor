# ==================================
# CONFIGURACIÓN DE LA BASE DE DATOS (DataSource)
# ==================================
# La URL de conexión a tu base de datos MySQL.
# Asegúrate de que el nombre de la base de datos ("chat_db" en este ejemplo) exista.
# Necesitarás crearla manualmente en tu gestor de MySQL.
spring.datasource.url=jdbc:mysql://localhost:3306/chat_db?createDatabaseIfNotExist=true

# Tu nombre de usuario de MySQL (usualmente "root" para desarrollo local).
spring.datasource.username=root

# Tu contraseña de MySQL.
spring.datasource.password=0000

# ==================================
# CONFIGURACIÓN DE JPA/HIBERNATE
# ==================================
# Esta es la línea más importante para el desarrollo.
# "update" le dice a Spring que mire tus clases @Entity y automáticamente
# cree o modifique las tablas en la base de datos para que coincidan.
# ¡No más "CREATE TABLE" manuales!
spring.jpa.hibernate.ddl-auto=update

# (Opcional) Muestra las consultas SQL que Spring ejecuta en la consola.
# Es muy útil para depurar y aprender.
spring.jpa.show-sql=true
# El número máximo de clientes que pueden estar conectados simultáneamente.
chat.server.max-connections=10
# ==================================
# CONFIGURACION DE FEDERACION
# ==================================
chat.server.name=Servidor-Principal
chat.server.federation-port=5001

# COMENTADO para permitir conexiones desde otras máquinas en la red
# server.address=127.0.0.1

# ==================================
# CONFIGURACIÓN DE ACTUATOR (Monitoreo)
# ==================================
# Exponer todos los endpoints de actuator (métricas, health, info, etc.)
management.endpoints.web.exposure.include=*
# Base path para los endpoints de actuator
management.endpoints.web.base-path=/actuator
# Habilitar endpoint de Prometheus para métricas
management.endpoint.prometheus.enabled=true
# Mostrar detalles de health check
management.endpoint.health.show-details=always
# Habilitar métricas HTTP
management.metrics.export.prometheus.enabled=true
# Tags adicionales para métricas
management.metrics.tags.application=${spring.application.name:servidor}
management.metrics.tags.server=${chat.server.name:servidor}

# ==================================
# CONFIGURACIÓN DE TRAZABILIDAD (Tracing)
# ==================================
# Probabilidad de muestreo de trazas (1.0 = 100% de las trazas)
management.tracing.sampling.probability=1.0
# Endpoint de Zipkin (Tempo es compatible con Zipkin)
management.zipkin.tracing.endpoint=http://localhost:9411/api/v2/spans
